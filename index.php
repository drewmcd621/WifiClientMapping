<?php
error_reporting(E_ALL);
ini_set("display_errors", 1);


require_once "wifiPath.php";
require_once "wifiAPs.php";

$paths = getPaths();
$routes = getRoutes();
$aps =  getAPs();

$start = getStart();
	
	


?>
<!DOCTYPE html>
<html>
<head>
	<script type="text/javascript" src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<script type="text/javascript">
		//d3.select("body").append("svg").attr("width", 50).attr("height", 50).append("circle").attr("cx", 25).attr("cy", 25).attr("r", 25).style("fill", "purple");
		window.onload = function(){
		var svg = d3.select("#main_svg");
		var wifi = d3.select("#floor2-ani");
		
		var lineFunction = d3.svg.line().x(function(d) { return d.x; }).y(function(d) { return d.y; }).interpolate('linear');
		
		function moveClient(path, rev)
		{
			var l = path.getTotalLength();
			return function(d, i, a) {
				//d = datum, i = index, a = current attribute
				return function(t) {
				//t = time (0 - 1)
					var pos;
					
					if(rev)
					{
						pos = (1-t) * l;
					}
					else
					{
						pos = t*l;
					}
					
					var p = path.getPointAtLength(pos);
					return "translate(" + (p.x)  + "," + (p.y)  + ")";//Move marker
				}
			}
		
		}
		
	
		
		//Start PHP generated section		
		<?php 
		//addPoints($table); 
		addAPs($aps);
		addPaths($paths, $routes, $aps, $start);
		?>
		//End PHP generated section
		}
	</script>
</head>
	<body>
		<svg id="main_svg" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="600mm" viewBox="0 0 1500 1250" width="825mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/">
		<g id="floor2" transform="translate(-.0018851 .083080)">
  <g id="floor2-sections" display="none">
   <path id="floor2-base" d="m525.11 241.33v-125.51h-127.08c0.37958 58.428 0.0625 65.326-0.19087 124.8zm-324.67 223.05v34.947h-41.429v53.992h66.999c0 34.074 22.06 47.393 43.749 47.035 21.689-0.3578 43.19-16.433 43.19-47.035l64.896-0.4046v-52.164h-42.581v-35.444h89.763c-0.0275-3.5962 0-53.973 0-53.973h-27.332c-0.0674-34.404-0.0952-98.096-0.0953-119.04 109.24 1.2022 234.89 0.52506 344.14-0.0997l5.7142-240.57h-198.09l-30.453 11.429-0.147-11.429-30.909 11.429 0.309-11.429-30.6 11.429v-11.429l-30.601 11.429v-11.429h-42.632v-24.915h-88.534v27.308h-174.28v-27.308h-86.54v24.118l-32.795 0.282s0.1168 0.1168-0.2819 60.735l16.726 0.3988v130.41h-16.75v51.047h34.297v119.64h-35.095v51.047l56.63-0.0001c0 10.438 6.2585 17.686 16.338 17.714 10.079 0.028 18.358-7.2473 18.358-17.714z" fill-rule="evenodd" display="inline" fill="#d3d3d3"/>
   <path id="floor2-cma" d="m202.7 291.19h538.78l5.7142-240.53h-198.09l-30.453 11.429-0.147-11.429-30.909 11.429 0.309-11.429-30.6 11.429v-11.429l-30.601 11.429v-11.429h-49.239v62.887h-75.141v-60.494h-159.02v189.07h59.393zm322.16-50.819v-125.51h-127.08c0.37958 58.428 0.0625 65.326-0.19087 124.8z" fill-rule="evenodd" display="inline" fill="#ff8719"/>
   <path id="floor2-mnh" d="m397.69 411.33h27.332s-0.0275 50.377 0 53.973h-89.763v35.444h42.581v52.164l-64.896 0.4046c0 30.602-21.5 46.677-43.19 47.035-21.689 0.3579-43.749-12.961-43.749-47.035h-66.999v-53.992h41.429v-86.465l29.017-0.00026 0.00043-44.249h80.357v15.357h36.429v11.786h51.453z" display="inline" fill="#ffb619"/>
   <path id="floor2-music" display="inline" fill="#15a4b8" d="m143.56 54.028h-22.045v-27.308h-86.54v24.118l-32.973 0.282-0.2819 60.735 16.904 0.3988v130.84h124.98z"/>
   <path id="floor2-lib" d="m200.44 462.84h-108.04c0 10.466-8.279 17.741-18.358 17.714-10.079-0.028-16.338-7.2759-16.338-17.714l-56.63 0.0001v-49.457h35.095v-119.64h-34.297v-52.591h201.21v49.542h26.328l0.0397 122.26h-29.015z" display="inline" fill="#a9a9a9"/>
   <path id="path4235-2-3-8" d="m596.88 78.715v-21.25" display="inline" stroke="#475569" stroke-width="2" fill="none"/>
  </g>
  <g id="floor2-outerwall">
   <path id="floor2-outline" d="m524.73 239.83-0.00022-125.51h-127.08c0.37958 58.428 0.0625 65.326-0.19087 124.8zm-324.67 223.05v34.947h-41.429v53.992h66.999c0 34.074 22.06 47.393 43.749 47.035 21.689-0.3578 43.19-16.433 43.19-47.035l64.896-0.4046v-52.164h-42.581v-35.444h89.763c-0.0275-3.5962 0-53.973 0-53.973h-27.332c-0.0674-34.404-0.0953-117.64-0.0953-117.64l344.14-0.00026v-242.07h-192.38l-30.453 11.429-0.147-11.429-30.6 11.429v-11.429l-30.6 11.429v-11.429l-30.601 11.429v-11.429h-42.632v-24.915h-88.534v27.308h-174.28v-27.308h-86.54v24.118l-33.095 0.282v61.133h16.744v130.41l-16.744-0.00005v51.047h34.291v119.64h-34.291v51.047l55.827-0.0001c0 10.438 6.2585 17.686 16.338 17.714 10.079 0.028 18.358-7.2473 18.358-17.714z" stroke="#475569" stroke-width="3" fill="none"/>
  </g>
  <g id="floor2-walls" stroke="#475569" fill="none">
   <g stroke-width="2">
    <path id="path4228" d="m526.43 292.03v-20.375"/>
    <path id="path4233" d="m525.88 260.03v-20.375"/>
    <path id="path4235" d="m566.36 290.9v-33.875"/>
    <path id="path4237" d="m567.08 271.28h6.7171"/>
    <path id="path4237-9" d="m587.38 271.28h121.63"/>
    <path id="path4235-6" d="m726.01 292.09v-44.375"/>
    <path id="path4237-4" d="m719.88 271.15h6.7501"/>
    <path id="path4237-9-8" d="m620.19 241.65 105.44-0.50001v-56.501"/>
    <path id="path4237-99" d="m607.88 241.65h-41.25v-32.5h41.375"/>
    <path id="path4235-2" d="m598.01 242.59v-11.125"/>
    <path id="path4235-2-2" d="m598.01 219.43v-21.512"/>
    <path id="path4237-7" d="m525.29 240.57h12.592" />
    <path id="path4233-2" d="m536.96 241.5v-128.56"/>
    <path id="path4233-2-1" d="m550.76 241.5v-128.56"/>
    <path id="path4237-9-7" d="m618.55 209.18h76.325"/>
    <path id="path4235-2-3" d="m694.74 240.92v-11.125"/>
    <path id="path4235-2-5" d="m694.74 220.77v-23.146"/>
    <path id="path4237-9-85" d="m618.55 177.2h109.07"/>
    <path id="path4235-2-2-1" d="m597.86 187.6v-21.512"/>
    <path id="path4237-90" d="m598.04 177.02h11.313"/>
    <path id="path4235-2-5-4" d="m694.92 188.6v-23.146"/>
    <path id="path4235-2-5-4-2" d="m694.74 156.65v-23.146"/>
    <path id="path4237-8" d="m551.73 233.06h14.319"/>
    <path id="path4235-2-2-1-0" d="m597.81 155.78v-21.512"/>
    <path id="path4237-9-7-0" d="m618.76 145.05h76.325"/>
    <path id="path4237-99-1" d="m608.94 145.15h-41.25v-31.375h41.375"/>
    <path id="path4237-8-9" d="m551.46 177.02h14.319"/>
    <path id="path4235-5" d="m565.93 201.33v-47.875"/>
    <path id="path4237-9-7-0-2" d="m525.76 113.78h42.03"/>
    <path id="path4235-2-7" d="m597.88 124.28v-11.125"/>
    <path id="path4237-9-7-0-0" d="m618.75 113.21h107.44"/>
    <path id="path4235-5-8" d="m725.85 169.32v-64.316"/>
    <path id="path4237-4-1" d="m712.4 145.03h13.291"/>
    <path id="path4235-2-5-4-2-7" d="m694.27 124.52v-22.459"/>
    <path id="path4235-6-7" d="m725.76 93.232v-44.375"/>
    <path id="path4235-2-5-4-2-2" d="m693.76 94.476v-23.146"/>
    <path id="path4237-9-7-0-3" d="m579.34 83.153h115.58"/>
    <path id="path4237-8-9-1" d="m551.35 217.15h14.319"/>
    <path id="path4237-8-9-2" d="m550.85 135.9h16.194"/>
    <path id="path4235-2-7-5" d="m570.13 113.09v-11.125"/>
    <path id="path4841" d="m570.01 93.903v-10.75h-3.75v-32.5"/>
    <path id="path4237-8-9-2-2" d="m548.3 83.153h18.747"/>
    <path id="path4235-5-3" d="m549.3 83.934-0.00005-33.733"/>
   </g>
   <g stroke-width="3">
    <path id="path4235-2-2-1-0-9" d="m518.58 83.922v-21.512"/>
    <path id="path4235-2-2-1-0-9-6" d="m487.78 83.922v-21.512"/>
    <path id="path4235-2-2-1-0-9-5" d="m457.15 83.922v-21.512"/>
   </g>
   <path id="path4235-2-3-7" d="m693.76 64.402v-13.063" stroke-width="2"/>
   <path id="path4235-2-2-1-0-9-5-1" d="m413.17 89.235v-39.387" stroke-width="3"/>
   <path id="path4235-2-2-1-0-9-5-7" d="m412.88 114.03v-13.762" stroke-width="3"/>
  </g>
  <g id="floor2-ani">
  
  </g>
  <g id="floor2-wifi" display="none">
   <g stroke="#000" stroke-width="1px" fill="none">
  <path id="SD11toSD8" d="m680.95 159.83c-1.8536-0.13371-3.7106-0.22213-5.5685-0.26516-13.442-0.31128-26.888 1.7525-40.305 0.8839-2.7436-0.17762-5.4931-0.48032-8.1449-1.2064-2.6518-0.72604-5.2142-1.8912-7.3232-3.6551-3.6502-3.0529-5.7251-7.897-5.4165-12.646 0.30857-4.7485 2.993-9.2834 7.0075-11.838"/>
    <path id="HFtoSD1" d="m529.76 264.61c2.2703 0.18789 4.5764-0.0683 6.7501-0.75001 3.5896-1.1257 6.7171-3.3582 9.6938-5.6585s5.9086-4.7271 9.3064-6.3416c5.9216-2.8138 12.85-2.9228 19.25-1.5 8.2928 1.8436 15.916 6.1036 24.25 7.7501 2.7958 0.55234 5.6508 0.80426 8.5001 0.75001"/>
    <path id="SD1toSD2" d="m607.41 258.86h0.79551 74.335 0.44195"/>
    <path id="SD2toSD5" d="m682.94 258.87c3.553-0.0915 7.1043-0.25361 10.651-0.48614 5.5348-0.36288 11.101-0.90552 16.414-2.4996 5.3127-1.594 10.401-4.3097 14.08-8.4607 2.8697-3.238 4.78-7.2224 6.1872-11.314 4.3477-12.64 4.1242-26.382 2.8284-39.687-0.30447-3.1261-0.68321-6.312-2.0208-9.1539-0.66881-1.4209-1.578-2.7407-2.7489-3.7873s-2.611-1.8122-4.1576-2.085c-1.7056-0.30078-3.483 0.006-5.0807 0.67423-1.5976 0.66859-3.0288 1.6861-4.3352 2.823-2.6129 2.2739-4.7891 5.0584-7.6432 7.0211-3.157 2.171-6.9789 3.2086-10.792 3.5873-3.8126 0.37864-7.6557 0.13472-11.483-0.0517-21.191-1.0323-42.424-0.29006-63.64-0.26515-0.73658 0.00086-1.4732 0.00086-2.2097 0"/>
    <path id="SD2toSD8" d="m682.81 258.92c0.96219-0.0476 1.9246-0.0918 2.887-0.13259 6.412-0.27156 12.874-0.39585 19.148-1.7474 7.5512-1.6268 14.87-5.1652 19.961-10.975 4.3958-5.0169 6.9078-11.444 8.3159-17.964 1.5956-7.3881 1.8717-15.002 1.7038-22.558-0.1797-8.0862-0.86049-16.152-1.5429-24.211-0.10748-1.2694-0.21661-2.5478-0.56178-3.7741-0.34516-1.2263-0.94523-2.4113-1.8972-3.2578-0.92059-0.81868-2.1099-1.2721-3.3047-1.5727-1.1947-0.30056-2.4217-0.46542-3.6078-0.79868-3.0774-0.8647-5.7147-2.8064-8.4269-4.4982-2.6426-1.6484-5.4331-3.094-8.4091-4.0126-4.1843-1.2916-8.6114-1.5088-12.938-2.1875-3.3482-0.52526-6.6737-1.3326-10.063-1.375-1.0652-0.0133-2.1313 0.0494-3.1875 0.1875"/>
    <path id="SD1toSD5" d="m607.51 258.86c1.544-1.8211 2.8502-3.8436 3.875-6.0001 1.9096-4.0182 2.8215-8.447 3.25-12.875 1.1086-11.456-0.91459-23.028 0-34.5 0.14783-1.8543 0.37727-3.7238 1.029-5.466 0.73499-1.9648 2.0065-3.7258 3.6402-5.0416"/>
    <path id="SD5toSD8" d="m680.95 159.92c-1.1875-0.0427-2.375-0.0843-3.5625-0.125-16.886-0.57823-33.85-0.95072-50.626 1.0625-2.044 0.2453-4.0974 0.52892-6.0532 1.1714-1.9559 0.64249-3.8262 1.6676-5.1969 3.2036-1.7251 1.9331-2.5366 4.5336-2.8209 7.1088-0.28438 2.5752-0.0891 5.1756-0.0541 7.7663 0.0364 2.6949-0.0984 5.4207 0.46277 8.0568 0.28058 1.318 0.73783 2.6072 1.4443 3.7548 0.70647 1.1475 1.6697 2.1508 2.843 2.8136 0.62243 0.35162 1.2999 0.60566 2 0.75001"/>
    <path id="SD11toSD5" d="m618.63 195.23c-1.0845-0.67144-2.0595-1.5193-2.875-2.5-1.7731-2.1323-2.7494-4.8376-3.1953-7.5747-0.44591-2.7371-0.39219-5.5286-0.30475-8.3004 0.38416-12.177 1.3955-24.327 1.875-36.5 0.0607-1.5404 0.11522-3.0974 0.52172-4.5844s1.2055-2.921 2.4783-3.7907c1.2238-0.83616 2.8373-1.0734 4.25-0.62501"/>
    <path id="SD14toSD11" d="m621.02 131.37c-3.2617-2.0415-5.9296-5.0196-7.6015-8.4854-1.184-2.4545-1.8745-5.1634-1.862-7.8885s0.74354-5.463 2.2155-7.7564c2.0675-3.2212 5.4571-5.3963 9.0157-6.806 7.469-2.9587 15.744-2.8913 23.777-2.7401 10.373 0.19535 20.744 0.46053 31.113 0.7955"/>
    <path id="SD8toSD14" d="m677.63 98.482c6.7957 0.2343 13.607 0.02537 20.375-0.62501 3.8076-0.36586 7.6075-0.87162 11.431-0.96938 3.8239-0.09776 7.7022 0.22376 11.319 1.4694 4.5773 1.5765 8.6466 4.6685 11.25 8.7501 3.3392 5.2351 4.1306 11.71 3.9565 17.917-0.1741 6.2069-1.2241 12.374-1.2065 18.583 0.0151 5.3448 0.81698 10.753-0.22056 15.996-0.51877 2.6216-1.5141 5.1836-3.1638 7.286s-3.9905 3.7183-6.6157 4.2184c-2.7571 0.52522-5.6204-0.19315-8.1736-1.3589-2.5532-1.1657-4.8795-2.7668-7.3266-4.1412-8.5826-4.8205-18.74-6.7807-28.5-5.5001"/>
    <path id="SD14toSD17" d="m677.42 98.311c-35.336-1.3633-70.716-1.5991-106.07-0.70711-26.425 0.66677-52.834 1.9636-79.197 3.8891"/>
    <path id="SD11toSD17" d="m621.2 131.55c-2.9944-1.9452-5.3726-4.8241-6.7176-8.1318-1.4134-3.476-1.6791-7.2933-2.4749-10.96-0.79466-3.6618-2.2167-7.3364-4.9498-9.8996-1.8892-1.7717-4.306-2.9098-6.808-3.579-2.502-0.66922-5.1009-0.89225-7.6878-1.0172-6.9491-0.33569-13.911 0.01644-20.86 0.35356-26.272 1.2745-52.554 2.3353-78.843 3.182"/>
    <path id="H16toHF" d="m529.8 264.63-42.323-0.22855"/>
    <path id="HBCtoH16" d="m487.73 264.31-145.49 1.591"/>
    <path id="HBCtoSD17" d="m342.78 265.9c23.688-3.7361 48.172 10.728 46.796-23.1l-0.12508-131.86c0.0442-9.0534 1.1102-17.585 22.875-15.547 26.132 0.58487 52.942 4.147 80.341 5.999l0.0946-0.28052"/>
   
   </g>
   <g fill-opacity=".27059" fill="#000366">
    <ellipse id="ScaifeD11" rx=".79550" ry=".70711" cy="131.37" cx="622"/>
    <ellipse id="scaifeD5" rx=".79550" ry=".70711" cy="195.72" cx="618.73"/>
    <ellipse id="path4987-2" rx=".79550" ry=".70711" cy="98.134" cx="677.42"/>
    <ellipse id="scaifeD17" rx=".79550" ry=".70711" cy="101.32" cx="492.68"/>
    <ellipse id="HeinzBC" rx=".79550" ry=".70711" cy="265.9" cx="342.42"/>
    <ellipse id="HeinzD16" rx=".79550" ry=".70711" cy="264.48" cx="487.91"/>
    <ellipse id="HeinzF" rx=".79550" ry=".70711" cy="264.31" cx="529.63"/>
    <ellipse id="ScaifeD1" rx=".79550" ry=".70711" cy="258.47" cx="607.77"/>
    <ellipse id="ScaifeD2" rx=".79550" ry=".70711" cy="259" cx="683.07"/>
    <ellipse id="ScaifeD8" rx=".79550" ry=".70711" cy="159.65" cx="680.78"/>
   </g>
  </g>
 </g>
		</svg>

	</body>
</html>